asyncapi: 3.0.0
info:
  title: Golang Backend Flightstripes
  version: 0.0.1
channels:
  frontEndEvents:
    address: 'events/front_end'
    messages:
      heartbeat:
        $ref: '#/components/messages/heartbeat'
      initiateConnection:
        $ref: '#/components/messages/initiateConnection'
      closeConnection:
          $ref: '#/components/messages/closeConnection'
      initialConnection:
          $ref: '#/components/messages/initialConnection'
      controllerOnline:
          $ref: '#/components/messages/controllerOnline'
      controllerOffline:
          $ref: '#/components/messages/controllerOffline'
      airportConfigurationChange:
          $ref: '#/components/messages/airportConfigurationChange'
      goAround:
          $ref: '#/components/messages/goAround'
      coordinationRequestInit:
          $ref: '#/components/messages/coordinationRequestInit'
      coordinationRequestAccept:
          $ref: '#/components/messages/coordinationRequestAccept'
      coordinationRequestReject:
          $ref: '#/components/messages/coordinationRequestReject'
      stripUpdate:
          $ref: '#/components/messages/stripUpdate'



components:
  messages:
    heartbeat:
      payload:
        type: object
        properties:
          message:
            type: string
            description: Heartbeat message

    initiateConnection:
      payload:
        type: object
        properties:
          cid:
            type: string
            description: CID of the controller
          position:
            type: string
            description: Position of the controller
          authenticationToken:
            type: string
            description: Authentication token
    closeConnection:
      payload:
        type: object
        properties:
          message:
            type: string
            description: Close connection message

    initialConnection:
      payload:
        type: object
        properties:
          controllersOnline:
            type: array
            items:
              type: object
              properties:
                cid:
                  type: string
                  description: CID of the controller
                position:
                  type: string
                  description: Position of the controller
          airportConfiguration:
            type: object
            properties:
              airport:
                type: string
                description: ICAO of the airport
              runwayConfiguration:
                type: string
                description: Runway configuration
              atisConfiguration:
                type: string
                description: ATIS configuration
          strips:
            type: array
            items:
              type: object
              properties:
                stripID:
                  type: string
                  description: Strip ID
                cid:
                  type: string
                  description: CID of the controller
                position:
                  type: string
                  description: Position of the controller
                flightNumber:
                  type: string
                  description: Flight number
                aircraftType:
                  type: string
                  description: Aircraft type
                departure:
                  type: string
                  description: Departure airport
                arrival:
                  type: string
                  description: Arrival airport
                route:
                  type: string
                  description: Route
                flightRules:
                  type: string
                  description: Flight rules
                remarks:
                  type: string
                  description: Remarks
          coordinationRequests:
            type: array
            items:
              type: object
              properties:
                requestID:
                  type: string
                  description: arbritary request ID
                initiatedByCID:
                  type: string
                  description: CID of position who is requesting
                initiatedByPosition:
                  type: string
                  description: Position of request.
                targetStripID:
                  type: string
                  description: The strip

    controllerOnline:
      payload:
        type: object
        properties:
          cid:
            type: string
            description: CID of the controller
          position:
            type: string
            description: Position of the controller
    controllerOffline:
      payload:
        type: object
        properties:
          cid:
            type: string
            description: CID of the controller
          position:
            type: string
            description: Position of the controller

    airportConfigurationChange:
      payload:
        type: object
        properties:
          airport:
            type: string
            description: ICAO of the airport
          runwayConfiguration:
            type: string
            description: Runway configuration
          atisConfiguration:
            type: string
            description: ATIS configuration

    goAround:
      payload:
        type: object
        properties:
          initiatedBy:
            type: string
            description: Who initiated the GoAround

    coordinationRequestInit:
      payload:
        type: object
        properties:
          requestID:
            type: string
            description: arbritary request ID
          initiatedByCID:
            type: string
            description: CID of position who is requesting
          initiatedByPosition:
            type: string
            description: Position of request.
          targetStripID:
            type: string
            description: The strip being requested

    coordinationRequestAccept:
      payload:
        type: object
        properties:
          requestID:
            type: string
            description: request id
          initiatedByCID:
            type: string
            description: CID of position who owns the request
          acceptedByCID:
            type: string
            description: CID of position/person who accepts request
          targetStripID:
            type: string
            description: The strip being requested

    coordinationRequestReject:
      payload:
        type: object
        properties:
          requestID:
            type: string
            description: request id
          initiatedByCID:
            type: string
            description: CID of position who owns the request
          acceptedByCID:
            type: string
            description: CID of position/person who rejects request
          targetStripID:
            type: string
            description: The strip being requested

    stripUpdate:
      payload:
        type: object
        properties:
          ID:
            type: string
            description: Strip ID
          CIDPilot:
            type: string
            description: CID of the pilot
          Origin:
            type: string
            description: Origin airport
          Destination:
            type: string
            description: Destination airport
          Route:
            type: string
            description: Route
          Remarks:
            type: string
            description: Remarks
          AssignedSquawkCode:
            type: string
            description: Assigned squawk code
          SquawkCode:
            type: string
            description: Squawk code
          SID:
            type: string
            description: SID
          ClearedAltitude:
            type: string
            description: Cleared altitude
          Heading:
            type: string
            description: Heading
          AircraftType:
            type: string
            description: Aircraft type
          Runway:
            type: string
            description: Runway
          RequestedFinalAltitude:
            type: string
            description: Requested final altitude
          Capabilities:
            type: string
            description: Capabilities
          CommunicationType:
            type: string
            description: Communication type
          AircraftCategory:
            type: string
            description: Aircraft Weight category
          Stand:
            type: string
            description: Stand
          Sequence:
            type: string
            description: Sequence
          Cleared:
            type: boolean
            description: Cleared
          PositionFrequency:
            type: string
            description: Position frequency
          Bay:
            type: string
            description: Bay
          Position:
            type: string
            description: Position # TODO
          TOBT:
            type: string
            description: Target off block time
          TSAT:
            type: string
            description: Target start up approval time
          TTOT:
            type: string
            description: Target take off time
          CTOT:
            type: string
            description: Calculated take off time
          AOBT:
            type: string
            description: Actual off block time
          ASAT:
            type: string
            description: Actual start up approval time
    stripAssumeRequestInit:
        payload:
            type: object
            properties:
            requestID:
                type: string
                description: arbritary request ID
            initiatedByCID:
                type: string
                description: CID of position who is requesting
            initiatedByPosition:
                type: string
                description: Position of request.
            targetStripID:
                type: string
                description: The strip
    stripAssumeRequestAccept:
        payload:
            type: object
            properties:
            requestID:
                type: string
                description: request id
            initiatedByCID:
                type: string
                description: CID of position who owns the request
            acceptedByCID:
                type: string
                description: CID of position/person who accepts request
            targetStripID:
                type: string
                description: The strip
    stripAssumeRequestReject:
        payload:
            type: object
            properties:
            requestID:
                type: string
                description: request id
            initiatedByCID:
                type: string
                description: CID of position who owns the request
            rejectedByCID:
                type: string
                description: CID of position/person who rejects request
            targetStripID:
                type: string
                description: The strip
    stripTransferRequestInit:
        payload:
            type: object
            properties:
            requestID:
                type: string
                description: arbritary request ID
            initiatedByCID:
                type: string
                description: CID of position who is requesting
            initiatedByPosition:
                type: string
                description: Position of request.
            targetStripID:
                type: string
                description: The strip
    stripTransferRequestAccept:
        payload:
            type: object
            properties:
            requestID:
                type: string
                description: request id
            initiatedByCID:
                type: string
                description: CID of position who owns the request
            acceptedByCID:
                type: string
                description: CID of position/person who accepts request
            targetStripID:
                type: string
                description: The strip
    stripTransferRequestReject:
        payload:
            type: object
            properties:
            requestID:
                type: string
                description: request id
            initiatedByCID:
                type: string
                description: CID of position who owns the request
            rejectedByCID:
                type: string
                description: CID of position/person who rejects request
            targetStripID:
                type: string
                description: The strip